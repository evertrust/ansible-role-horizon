{% set start_index = 4 %}
{% for node in horizon_nodes %}
play.filters.hosts.allowed.{{ start_index + loop.index0 }}="{{ node.hostname }}"
play.filters.hosts.allowed.{{ start_index + loop.index0 + horizon_nodes | length }}="{{ node.hostname }}.orb.local"
{% endfor %}
{% if horizon_use_load_balancer | default(false) %}
play.filters.hosts.allowed.{{ start_index + (horizon_nodes | length * 2) }}="{{ horizon_load_balancer_hostname }}"
#play.filters.hosts.allowed.{{ start_index + (horizon_nodes | length) }}="{{ horizon_load_balancer_hostname }}"

{% endif %}

# Pekko cluster split-brain resolver configuration
pekko.cluster.split-brain-resolver {
    active-strategy = "lease-majority"
    lease-majority {
      lease-implementation = "lease.mongo"
    }
}